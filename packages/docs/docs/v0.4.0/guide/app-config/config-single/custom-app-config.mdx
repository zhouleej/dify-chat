import { Tab, Tabs } from 'rspress/theme';

# è‡ªå®šä¹‰åº”ç”¨é…ç½®

## ç¡®å®šè¿è¡Œæ¨¡å¼

åœ¨å¼€å§‹é…ç½®ä¹‹å‰ï¼Œç¡®ä¿ä½ çš„è¿è¡Œæ¨¡å¼æ˜¯å•åº”ç”¨æ¨¡å¼ã€‚

<Tabs>
  <Tab label="React SPA">
```tsx title="packages/react-app/src/App.tsx"
// åˆå§‹åŒ–å…¨å±€è¿è¡Œæ—¶é…ç½®
difyChatRuntimeConfig.init('singleApp')
```
	</Tab>
  <Tab label="Next.js">
```bash title="packages/nextjs-app/.env"
# è¿è¡Œæ¨¡å¼
RUNNING_MODE=singleApp
```
	</Tab>
</Tabs>

## è‡ªå®šä¹‰åº”ç”¨é…ç½®

Dify Chat å·²ç»å†…ç½®äº†å¤šç§åº”ç”¨é…ç½®ç®¡ç†æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚ï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹å¼ã€‚

### React SPA ç‰ˆæœ¬

#### é…ç½®å…¥å£

```tsx title="packages/react-app/src/services/app/singleApp/index.ts"
// é»˜è®¤ä½¿ç”¨ LocalStorage å­˜å‚¨
export { appConfig } from './localstorage'
```

#### å†…ç½®å®ç°

**1. LocalStorage**

ä½¿ç”¨ LocalStorage å­˜å‚¨å’Œä¿®æ”¹æ•°æ®ï¼Œå½“ç”¨æˆ·åˆ‡æ¢æµè§ˆå™¨åï¼Œæ•°æ®ä¼šä¸¢å¤±ï¼Œä»…ä½œä¸ºæ¼”ç¤ºç”¨ã€‚

**2. é™æ€æ•°æ®**

ä½¿ç”¨é™æ€æ•°æ®è¿›è¡Œå­˜å‚¨ï¼Œä»…æ”¯æŒæŸ¥è¯¢ï¼Œé€‚ç”¨äºç”¨æˆ·æ— éœ€è‡ªå®šä¹‰åº”ç”¨çš„åœºæ™¯ã€‚

å®šä¹‰é…ç½®ï¼š

```ts title="packages/react-app/src/services/app/singleApp/static-readonly/data.ts"
import { AppModeEnums } from '@dify-chat/core'

/**
 * é™æ€çš„åº”ç”¨é…ç½®ï¼Œç”¨äºæ¼”ç¤º
 */
export const staticAppConfig = {
	id: '0.270357011315995',
	info: {
		name: 'My Chatflow APP',
		description: 'æˆ‘çš„ Chatflow åº”ç”¨',
		tags: [],
		mode: AppModeEnums.CHATFLOW,
	},
	requestConfig: {
		apiBase: 'https://api.dify.ai/v1',
		apiKey: 'app-xxxxxxx',
	},
}
```

**3. Restful API**

é€šè¿‡æ¥å£è·å–å’Œä¿®æ”¹æ•°æ®ï¼Œæ¨èä½¿ç”¨ğŸŒŸ

é»˜è®¤è¯·æ±‚çš„åç«¯æœåŠ¡åœ°å€ä¸º `http://localhost:3000`ï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„éœ€è¦ä¿®æ”¹ã€‚

å¦‚æœä½ çš„åç«¯æœåŠ¡åœ°å€ä¸é»˜è®¤åœ°å€ä¸ä¸€è‡´ï¼Œåªéœ€åœ¨å¯¹åº”çš„ restful å®ç°ä¸­ï¼Œä¿®æ”¹è°ƒç”¨çš„ BaseURL å³å¯ã€‚

```ts title="packages/react-app/src/services/app/singleApp/restful.ts"
// æ¯”å¦‚ä½ çš„è‡ªå®šä¹‰åç«¯æœåŠ¡åœ°å€æ˜¯ http://localhost:4567
const API_BASE_URL = 'http://localhost:4567'
```

ä½ éœ€è¦è‡ªè¡Œå®ç°ä»¥ä¸‹æ¥å£ä»¥å®Œæˆåº”ç”¨é…ç½®çš„è¯»å–å’Œä¿å­˜ï¼š

| æ¥å£åç§° | è¯·æ±‚æ–¹æ³• | æ¥å£è·¯å¾„ | è¯·æ±‚å‚æ•° | è¿”å›å‚æ•° |
|---------|----------|----------|----------|----------|
| è·å– App é…ç½®è¯¦æƒ… | GET | `/app` | æ—  | `IDifyAppItem` |
| ä¿å­˜ App é…ç½® | POST | `/app` | `IDifyAppItem` | æ—  |

### Next.js ç‰ˆæœ¬

#### é…ç½®å…¥å£

```ts title="packages/nextjs-app/services/app/singleApp/index.ts"
// ä½¿ç”¨ fs å®ç°
export { appConfig } from "./fs";
```

#### å†…ç½®å®ç°

**1. æœ¬åœ°æ–‡ä»¶å­˜å‚¨**

ä½¿ç”¨æœ¬åœ°æ–‡ä»¶è¿›è¡Œå­˜å‚¨ï¼Œæ”¯æŒè¯»å–å’Œä¿®æ”¹ï¼Œä½†å­˜åœ¨ä¸¢å¤±æ•°æ®çš„é£é™©ã€‚

é…ç½®ç¤ºä¾‹ï¼š

```json title="packages/nextjs-app/.dify-chat/storage/app.config.json"
{
  "info": {
    "name": "Chatflow Demo",
    "description": "",
    "tags": [
      "å‚æ•°",
      "æµ‹è¯•"
    ],
    "mode": "advanced-chat",
    "author_name": "Dify"
  },
  "requestConfig": {
    "apiBase": "https://api.dify.ai/v1",
    "apiKey": "app-xxx"
  },
  "answerForm": {
    "enabled": false
  },
  "inputParams": {
    "enableUpdateAfterCvstStarts": false
  },
  "extConfig": {
    "conversation": {
      "openingStatement": {
        "displayMode": "default"
      }
    }
  },
  "id": "1751257572123"
}
```

**2. Restful API**

é€šè¿‡ API æ¥å£ç®¡ç†ï¼Œæ”¯æŒè¯»å–å’Œä¿®æ”¹ï¼Œæ¨èä½¿ç”¨ğŸŒŸ

é»˜è®¤è¯·æ±‚çš„åç«¯æœåŠ¡åœ°å€ä¸º `http://localhost:3000`ï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„éœ€è¦ä¿®æ”¹ã€‚

å¦‚æœä½ çš„åç«¯æœåŠ¡åœ°å€ä¸é»˜è®¤åœ°å€ä¸ä¸€è‡´ï¼Œåªéœ€åœ¨å¯¹åº”çš„ restful å®ç°ä¸­ï¼Œä¿®æ”¹è°ƒç”¨çš„ BaseURL å³å¯ã€‚

```ts title="packages/nextjs-app/services/app/singleApp/restful.ts"
// æ¯”å¦‚ä½ çš„è‡ªå®šä¹‰åç«¯æœåŠ¡åœ°å€æ˜¯ http://localhost:4567
const API_BASE_URL = 'http://localhost:4567'
```

ä½ éœ€è¦è‡ªè¡Œå®ç°ä»¥ä¸‹æ¥å£ä»¥å®Œæˆåº”ç”¨é…ç½®çš„è¯»å–å’Œä¿å­˜ï¼š

| æ¥å£åç§° | è¯·æ±‚æ–¹æ³• | æ¥å£è·¯å¾„ | è¯·æ±‚å‚æ•° | è¿”å›å‚æ•° |
|---------|----------|----------|----------|----------|
| è·å– App é…ç½®è¯¦æƒ… | GET | `/app` | æ—  | `IDifyAppItem` |
| ä¿å­˜ App é…ç½® | POST | `/app` | `IDifyAppItem` | æ—  |
